<?php use Phalcon\Tag; ?>
<?php $this->flashSession->output() ?>

<div class="container">
  <div class="row">
      <div class="page-header" style="margin-top:40px">
        <form class="form-inline">
          <h1 class="mb-4 mr-sm-4 mb-sm-0">รายชื่อนักศึกษา</h1>
          <?php echo $this->tag->textField(["s", "class" => "form-control mb-2 mr-sm-2 mb-sm-0", "placeholder" => "ค้นหาชื่อ,นามสกุล,ชั้นปี"]) ?>
          <?php echo $this->tag->submitButton(["ค้นหา", "class" => "btn btn-outline-primary mb-2 mr-sm-2 mb-sm-0"]) ?>
          <?php echo $this->tag->linkto(["manage/studentadd", "class" => "btn btn-outline-success mb-3 mr-sm-3 mb-sm-0","เพิ่มนักศึกษา"]) ?>
        </form>
      </div>
      <table class="table table-striped" style="margin-top:10px">
        <thead>
          <tr>
            <th class="text-center">รหัสนักศึกษา</th>
            <th class="text-center">ชื่อ</th>
            <th class="text-center">นามสกุล</th>
            <th class="text-center">ปีที่เข้าศึกษา</th>
            <th class="text-center">ดำเนินการ</th>
          </tr>
        </thead>
        <tbody>
          <?php foreach ($page->items as $act): ?>
            <tr>
              <th class="text-center" scope="row"><?=$act->username; ?></th>
              <td class="text-center"><?=$act->Firstname?></td>
              <td class="text-center"><?=$act->Lastname?></td>
              <td class="text-center"><?=$act->Years?></td>
              <td class="text-center">
                <?php echo $this->tag->linkto(["manage/studentedit/".$act->id, "class" => "btn btn-info btn-sm","แก้ไข"]) ?>
                <?php echo $this->tag->linkto(["manage/studentdelete/".$act->id, "class" => "btn btn-danger btn-sm","ลบ"]) ?>
              </td>
            </tr>
          <?php endforeach; ?>
        </tbody>
      </table>
      <div style="width:100%;">
        <nav aria-label="Page navigation example">
          <ul class="pagination justify-content-center">
            <li class="page-item">
              <?php echo $this->tag->linkto(["manage/studentsearch", "class" => "page-link","< หน้าแรก"]) ?>
            </li>
            <?php if ($page->before != $page->current): ?>
            <li class="page-item">
              <?php echo $this->tag->linkto(["manage/studentsearch/?page=".$page->before, "class" => "page-link",$page->before]) ?>
            </li>
            <?php endif; ?>
            <li class="page-item disabled"><a class="page-link" href="#"><?=$page->current?></a></li>
            <?php if ($page->next != $page->current): ?>
            <li class="page-item">
              <?php echo $this->tag->linkto(["manage/studentsearch/?page=".$page->next, "class" => "page-link",$page->next]) ?>
            </li>
            <?php endif; ?>
            <li class="page-item">
              <?php echo $this->tag->linkto(["manage/studentsearch/?page=".$page->last, "class" => "page-link","สุดท้าย >>"]) ?>
            </li>
          </ul>
        </nav>
      </div>
  </div>
</div>
